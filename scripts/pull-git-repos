#!/usr/bin/env bash

# A simple script to pull all software from git repositories in the
# $HOME/Software directory

# Show lines being run
#set -x

# If no input is supplied, use the software directory
input=${1:-$HOME/Software}

gitdirs=$( fd '\.git$' --absolute-path --hidden --type directory --max-depth 2 $input --exec=dirname)
#gitdirs=$(find $HOME/Software -type d -execdir test -d {}/'.git' \; -prune -print)

for ii in $gitdirs; do
echo && echo $ii
git -C $ii fetch --all --tags
git -C $ii submodule update --init --recursive
git -C $ii pull --recurse-submodules
done
